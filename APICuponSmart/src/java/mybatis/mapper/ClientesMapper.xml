<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cliente">
    <select id="mostrarClientePorId" resultType="modelo.pojo.Cliente" parameterType="int">
        SELECT * 
        FROM clientes 
        WHERE idCliente=#{idCliente}
    </select>

    <insert id="registrarCliente" parameterType="modelo.pojo.Cliente">
        INSERT INTO clientes 
        (nombre, apellidoPaterno, apellidoMaterno, telefono, correoElectronico, fechaNacimiento, contrasenia, idDireccion) 
        VALUES 
        (#{nombre}, #{apellidoPaterno}, #{apellidoMaterno}, #{telefono}, #{correoElectronico}, #{fechaNacimiento}, #{contrasenia}, #{idDireccion})
    </insert>

    <update id="editarCliente" parameterType="map">
        UPDATE clientes SET 
        nombre=#{nombre}, apellidoPaterno=#{apellidoPaterno}, apellidoMaterno=#{apellidoMaterno}, telefono=#{telefono}, 
        correoElectronico=#{correoElectronico}, fechaNacimiento=#{fechaNacimiento}, contrasenia=#{contrasenia}, idDireccion=#{idDireccion}
        WHERE idCliente=#{idCliente}
    </update>

    <delete id="eliminarCliente" parameterType="int">
        DELETE FROM clientes
        WHERE idCliente=#{idCliente}
    </delete>

    <select id="obtenerDireccionCliente" parameterType="int" resultType="modelo.pojo.Cliente">
        SELECT idCliente, nombre, apellidoPaterno, apellidoMaterno, telefono, correoElectronico, fechaNacimiento, contrasenia, 
        idDireccion, Calle, Numero, codigoPostal, ciudad, colonia
        FROM clientes 
        INNER JOIN direcciones ON clientes.idDireccion = direcciones.idDireccion
        WHERE idCliente=#{idCliente}
    </select>
</mapper>
